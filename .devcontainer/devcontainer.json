// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/docker-existing-docker-compose
{
    "name": "langchain",

    // Point to a Docker Compose file
    "dockerComposeFile": "./docker-compose.yaml",

    // Required when using Docker Compose. The name of the service to connect to once running
    "service": "langchain",

    // The optional 'workspaceFolder' property is the path VS Code should open by default when
    // connected. This is typically a file mount in .devcontainer/docker-compose.yml
    "workspaceFolder": "/workspaces/langchain",

    // Prevent the container from shutting down
    "overrideCommand": true,

    // Features to add to the dev container
    "features": {
        "docker-in-docker": "latest"  // Install Docker inside the container
    },

    // Forward the Docker socket from the container to the host
    "mounts": [
        "source=/var/run/docker.sock,target=/var/run/docker.sock,type=bind"
    ],

    // Use 'postCreateCommand' to ensure the correct Docker context is used
    "postCreateCommand": "docker context use default",

    // Configure tool-specific properties
    "customizations": {
        "vscode": {
            // Configure properties specific to VS Code.
            "settings": {
                // Tell VS Code to use the forwarded Docker socket
                "docker.host": "unix:///var/run/docker.sock"
            }
        }
    }
}


